// 11.30日历.cpp : 此文件包含 "main" 函数。程序执行将在此处开始并结束。
//

#include "pch.h"
#include <iostream>
#include <string>
#define START 2007
#define DAYS 365
#define WEEKDAYS 7

using namespace std;

int month[12] = { 31,28,31,30,31,30,31,31,30,31,30,31 };
string week[7] = { "日","一","二","三","四","五","六" };
string calendar1[35][23] = {
						//    0	   1    2    3    4    5    6   7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22
							"  ","  ","  ","  ","  ","  "," 1"," ","  ","  ","  ","  ","  ","  "," 2","  ","  ","  ","  ","  ","  ","  "," 3",//0
						    "日","一","二","三","四","五","六"," ","日","一","二","三","四","五","六","  ","日","一","二","三","四","五","六",//1
						    "  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//2
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//3
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//4
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//5
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//6
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//7
							" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ",//                     8                         
							"  ","  ","  ","  ","  ","  "," 4"," ","  ","  ","  ","  ","  ","  "," 5","  ","  ","  ","  ","  ","  ","  "," 6",//9
						   "日","一","二","三","四","五","六"," ","日","一","二","三","四","五","六","  ","日","一","二","三","四","五","六",//10
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//11
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//12
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//13
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//14
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//15
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//16
							" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ", " "," "," "," ",//                     17
							"  ","  ","  ","  ","  ","  "," 7"," ","  ","  ","  ","  ","  ","  "," 8","  ","  ","  ","  ","  ","  ","  "," 9",//18
							"日","一","二","三","四","五","六"," ","日","一","二","三","四","五","六","  ","日","一","二","三","四","五","六",//19
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//20
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//21
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//22
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//23
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//24
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//25
							" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ",//                     26
							"  ","  ","  ","  ","  ","  ","10"," ","  ","  ","  ","  ","  ","  ","11","  ","  ","  ","  ","  ","  ","  ","12",//27
							"日","一","二","三","四","五","六"," ","日","一","二","三","四","五","六","  ","日","一","二","三","四","五","六",//28
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//29
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//30
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//31
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//32
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//33
							"  ","  ","  ","  ","  ","  ","  "," ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ",//34
};

bool isRun(int year) {
	if (year % 400 == 0)
		return true;
	else if (year % 4 == 0 && year % 100 != 0)
		return true;
	else
		return false;
}

int getStart(int year) {//获取输入年份的第一天为星期几
	int day=0,sum=0;
	if (year > START) {
		for (int i = START; i < year; i++) {
			if (isRun(i))
				sum += DAYS + 1;
			else
				sum += DAYS;
		}
		day = sum % WEEKDAYS + 1;
		return day%7;
	}
	else if (year == START) {
		return 1;
	}
	else {
		//小于2007年的年份倒着计算
		for (int i = START-1; i > year-1; i--) {
			if (isRun(i))
				sum += DAYS + 1;
			else
				sum += DAYS;
		}
		day = sum % WEEKDAYS - 1;
		return (7 - day)%7;
	}
}
void setCalendar(string c[][23],int year) {

	int start = getStart(year);
	int line = 2;
	int temp_s = start;
	int temp_l = 1;
	int m = 0;
	for(int j=0;j<4;j++)
		for (int i = 0; i < 3; i++) {
			int limit_s = 7 + 8 * i;//设置7天从头开始
			temp_l = line + 9 * j;//当前起始行
			temp_s = start + 8 * i;//当前起始列

			int limit = month[m];//得到当前月的天数

			if (m == 1 && isRun(year))//考虑闰年的2月
				limit++;

			int flag = start;//开始周几
			for (int day = 1; day <= limit; day++) {
				string str="  ";
				if (day < 10)
					str = " " +to_string(day);
				else
					str = to_string(day);

				c[temp_l][temp_s++].assign(str);
				flag++;

				if (temp_s == limit_s) {
					temp_s -= 7;
					temp_l++;
				}
				if (flag >= 7)
					flag = 0;
			}
			start = flag;
			m++;//更新月数
		}
}
void printCalendar(string c[][23]) {
	for (int i = 0; i < 35; i++) {
		for (int j = 0; j < 23; j++) {
			cout << c[i][j]<<" ";
		}
		cout << '\n';
	}
}



int main()
{	
	int year = 0;
	cout << "请输入年份:";
	cin >> year;
	setCalendar(calendar1,year);
	printCalendar(calendar1);
	return 0;
}

// 运行程序: Ctrl + F5 或调试 >“开始执行(不调试)”菜单
// 调试程序: F5 或调试 >“开始调试”菜单

// 入门提示: 
//   1. 使用解决方案资源管理器窗口添加/管理文件
//   2. 使用团队资源管理器窗口连接到源代码管理
//   3. 使用输出窗口查看生成输出和其他消息
//   4. 使用错误列表窗口查看错误
//   5. 转到“项目”>“添加新项”以创建新的代码文件，或转到“项目”>“添加现有项”以将现有代码文件添加到项目
//   6. 将来，若要再次打开此项目，请转到“文件”>“打开”>“项目”并选择 .sln 文件
